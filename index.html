<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no">
    <title>간단한 지도 표시하기</title>
    <script type="text/javascript" src="https://oapi.map.naver.com/openapi/v3/maps.js?ncpClientId=0d3c18w7fb"></script>
    <script type="text/javascript" src="https://oapi.map.naver.com/openapi/v3/maps.js?ncpClientId=0d3c18w7fb&submodules=geocoder"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.0/papaparse.min.js"></script>
</head>
<body>
<div id="map" style="width:100%;height:1000px;"></div>

<script>


// 지도 초기화
var map = new naver.maps.Map('map', {
        center: new naver.maps.LatLng(37.5665, 126.9780), // 초기 중심 좌표 (예: 서울)
        zoom: 10
    });

// 공공데이터 가쟈오기
fetch('./data/open_data.csv')
  .then(response => response.text())
  .then(csvData => {
    Papa.parse(csvData, {
      header: false,   // 헤더를 사용하여 각 열 이름을 가져옵니다.
      complete: function(results) {

        // E열(경도)과 F열(위도) 값만 추출
        var coordinates = results.data.map(row => [parseFloat(row.A), parseFloat(row.B)]);

        // 배열을 순회하며 마커 생성
        for (var i = 0; i < results.data.length-1; i++) {
                var position = results.data[i];
                var marker = new naver.maps.Marker({
                    position: new naver.maps.LatLng(parseFloat(position[1]) ,parseFloat(position[0])),
                    map: map
                });
            }

      }
    });
  })
  .catch(error => console.error("CSV 파일 로드 오류:", error));

    
</script>
</body>
</html>